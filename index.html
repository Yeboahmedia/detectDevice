<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Apple Device Detector</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            padding: 20px;
        }
        h1 {
            color: #007aff;
            font-size: 28px;
        }
        p {
            font-size: 20px;
        }
        strong {
            font-size: 22px;
        }
    </style>
</head>
<body>

    <h1 id="device-name">Detecting device...</h1>
    <p><strong>Screen Size:</strong> <span id="screen-size">Checking...</span></p>
    <p><strong>GPU:</strong> <span id="gpu-info">Checking...</span></p>
    <p><strong>ProMotion (120Hz):</strong> <span id="promotion">Checking...</span></p>

    <script>
        async function detectAppleDevice() {
            const ua = navigator.userAgent;
            const isIOS = /iPhone|iPad/.test(ua);
            if (!isIOS) return "Not an iPhone or iPad";

            // Step 1: Detect screen size
            const screenWidth = window.screen.width;
            const screenHeight = window.screen.height;

            const deviceGroups = {
                "iPhone SE (1st/2nd/3rd Gen)": [{ width: 320, height: 568 }, { width: 375, height: 667 }],
                "iPhone 6/7/8/XR/11": [{ width: 375, height: 812 }, { width: 414, height: 896 }],
                "iPhone 12/13/14": [{ width: 390, height: 844 }],
                "iPhone 12 Pro Max / 13 Pro Max / 14 Plus": [{ width: 430, height: 932 }],
                "iPhone 14 Pro": [{ width: 393, height: 852 }],
                "iPhone 14 Pro Max": [{ width: 430, height: 932 }],
                "iPhone 15 / 15 Plus": [{ width: 390, height: 844 }, { width: 430, height: 932 }],
                "iPhone 15 Pro / 15 Pro Max": [{ width: 393, height: 852 }, { width: 430, height: 932 }],
                "iPhone 16 / 16 Plus": [{ width: 390, height: 844 }, { width: 430, height: 932 }],
                "iPhone 16 Pro": [{ width: 393, height: 852 }],
                "iPhone 16 Pro Max": [{ width: 430, height: 932 }],
                "iPhone 16e": [{ width: 390, height: 844 }],
                "iPad Mini/Air/Pro 11-inch": [{ width: 768, height: 1024 }, { width: 820, height: 1180 }],
                "iPad Pro 12.9-inch": [{ width: 1024, height: 1366 }],
            };

            let detectedGroup = "Unknown Apple Device";
            Object.entries(deviceGroups).forEach(([model, sizes]) => {
                if (sizes.some(size => 
                    (screenWidth === size.width && screenHeight === size.height) ||
                    (screenWidth === size.height && screenHeight === size.width))) {
                    detectedGroup = model;
                }
            });

            // Step 2: Detect GPU using WebGL
            function getGPUInfo() {
                const canvas = document.createElement('canvas');
                const gl = canvas.getContext('webgl') || canvas.getContext('experimental-webgl');
                if (!gl) return "Unknown GPU";
                const debugInfo = gl.getExtension('WEBGL_debug_renderer_info');
                return debugInfo ? gl.getParameter(debugInfo.UNMASKED_RENDERER_WEBGL) : "Apple GPU";
            }

            const gpuRenderer = getGPUInfo();

            // Step 3: Workaround for Appleâ€™s Limited GPU Info
            let gpuDetails;
            if (gpuRenderer === "Apple GPU") {
                if (detectedGroup.includes("iPhone 15 Pro") || detectedGroup.includes("iPhone 16 Pro")) {
                    gpuDetails = "Apple A17 Pro GPU (Detected via Screen + iOS)";
                } else if (detectedGroup.includes("iPhone 16") || detectedGroup.includes("iPhone 16e")) {
                    gpuDetails = "Apple A18 GPU (Detected via Screen + iOS)";
                } else if (detectedGroup.includes("iPad")) {
                    gpuDetails = "Apple M1/M2 GPU (Detected via Screen + iOS)";
                } else {
                    gpuDetails = "Apple GPU (Limited Info)";
                }
            } else {
                gpuDetails = gpuRenderer;
            }

            // Step 4: Check for ProMotion (120Hz)
            function hasProMotion() {
                return window.matchMedia("(prefers-reduced-motion: no-preference)").matches;
            }

            let promotionStatus = hasProMotion() ? "Yes (120Hz)" : "No";

            // Update UI
            document.getElementById("device-name").innerText = detectedGroup;
            document.getElementById("screen-size").innerText = `${screenWidth} x ${screenHeight}`;
            document.getElementById("gpu-info").innerText = gpuDetails;
            document.getElementById("promotion").innerText = promotionStatus;
        }

        detectAppleDevice();
    </script>

</body>
</html>
